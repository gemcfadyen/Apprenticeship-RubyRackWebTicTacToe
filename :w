var BoardDisplay = {};
(function() {

  BoardDisplay.paint = function(game_data) {
    var table = document.createElement("table");
    var tableAttribute = document.createAttribute("id");
    tableAttribute.value = "grid-table";

    var gameStateAsJson = JSON.parse(game_data);
    var grid_representation = gameStateAsJson.formatted_rows;
    var valid_moves = gameStateAsJson.valid_moves;
    var game_state = gameStateAsJson.status;

    console.log("json grid to display is: " + gameStateAsJson.formatted_rows);
    console.log("json valid moves for display is: " + gameStateAsJson.valid_moves);
    console.log("json game state to display is: " + gameStateAsJson.status);
    var dimension = 3;
    var offset = 3;
    for(j=0; j< Math.sqrt(grid_representation.length); j++) {
      var row = table.insertRow(j);

      for (i= dimension; i < offset; i++) {
        var cell = row.insertCell(i);
        if($.inArray(grid_representation[i+offset], valid_moves) != -1) {
          cell.innerHTML = grid_representation[i]
        } else {
          cell.innerHTML = "<a class=\"board-display\" href=\"#\" data-id=cell-" + grid_representation[i] + " data-value=" + i + " data-grid=" + grid_representation + ">" + i + "</a>";
        }
        offset = offset + offset;
      }

    }

    table.setAttributeNode(tableAttribute);
    return table;
  };

  if (typeof module !== 'undefined' && module.exports) {
    module.exports = BoardDisplay;
  }

})();
//module.exports = BoardDisplay;
